<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Quick Eats</title>
    <link rel="stylesheet" href="jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.css"/>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/jquery-1.11.0.js" type="text/javascript"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/new.css">
    <link rel="stylesheet" href="css/resolution.css">

</head>

<body>

<div data-role="page" style="background-color: white">

    <div id="header"></div>

    <div data-role="content">

        <div class="left_name">Chicken Pot Roast</div>
        <div class="right_rating"><img src="image/rate.png" width="18px"/> 4.5</div>

        <div class=" ui-grid-a full-set">
            <div class="ui-block-a">
                <img id="image1" class="image1 images_style" type="button" src="image/shopImages/peppar1.png">
            </div>
            <div class="ui-block-b">
                <div class="food-des">
                    Pot roasted, slow cooked chicken with peas and corn with a side of mashed potatoes.
                </div>
            </div>
        </div>
        <div class="addfavourite food-des">Add to favourite <img id="heart" type="button" src="image/heart.png"
                                                                 width="16"/></div>

        <hr>
        <div class="ui-grid-a">
            <div class="ui-block-a food-attribute">
                Quantity
            </div>
            <div class="ui-block-b">
                <div class="ui-grid-b num_field">
                    <div class="minus">
                        <a href="#" class="ui-btn ui-icon-minus ui-btn-icon-notext ui-corner-all inc_buttons"
                           onclick="decrement()">-</a>

                    </div>
                    <div class="tet">
                        <input id="demoInput" type="number" min="0" max="" class="num_input">
                    </div>

                    <div class="plus">
                        <a href="#" class="ui-btn ui-icon-plus ui-btn-icon-notext ui-corner-all inc_buttons"
                           onclick="increment()">+</a>

                    </div>
                </div>

            </div>
        </div><!-- /grid-b -->

        <br>
        <div class="ui-grid-a">
            <div class="ui-block-a food-attribute">
                Price
            </div>
            <div class="ui-block-b">
                <div class="food-attribute">
                    Rs: 2100.00
                </div>
            </div>
        </div>
        <div class="ui-grid-a">
            <div class="ui-block-a blank">

            </div>
            <div class="ui-block-b">
                <div class="num_field">
                    <a href="#" data-role="button" data-inline="true" class="y-button">
                        Add to cart
                    </a>
                </div>
            </div>
        </div>


        <hr>
        <div class="food-attribute mr-b">Recent Comments</div>

        <div id="chat-box-items" class="chatbox">
            <div class="message-item">
                <table>
                    <tr>
                        <td>
                            <img src="image/Avater.png" class="message-item-pro-pic"/>
                        </td>
                        <td>
                            <b>niwarthana</b><br/>
                            <span class="feedback-text">Great Products.</span><br/>
                            <span class="time-ago">3 hour ago.</span>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <p>
            <a id="addcomment" data-role="button" data-inline="true" class="y-button">Add a comment</a>
        </p>

    </div>
    <div data-role="popup" id="popupLogin1" data-theme="a" class="ui-corner-all">
        <a data-rel="back"
           style="color: black; float: right; margin-top: 15px; margin-right: 15px; border: none; background-color: white;"
           class="ui-btn "> X</a>
        <!-- <img  type="button" src="image/close.png" data-rel="back" /> -->

        <div style="padding:10px 20px;">
            <h3>Add your comment & rating below</h3>

            <!-- <input type="text" name="user" id="un" value="" placeholder="add comment" data-theme="a"> -->

            <textarea name="textarea" id="inputmsg" style="margin-top: -17px;"></textarea>

            <!-- <button type="submit" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-check">Sign in</button> -->
            <table style="width: 100%">
                <td>
                    <span id="rating-msg" class="text-sm">Rate this product</span>
                    <div style="width: 100% !important;" class='rating-stars text-center'>
                        <button style="padding: 0px;width: 100%;background: none;border: none">
                            <ul id='stars'>
                                <li class='star' title='Poor' data-value='1'>
                                    <i class='fa fa-star fa-fw'></i>
                                </li>
                                <li class='star' title='Fair' data-value='2'>
                                    <i class='fa fa-star fa-fw'></i>
                                </li>
                                <li class='star' title='Good' data-value='3'>
                                    <i class='fa fa-star fa-fw'></i>
                                </li>
                                <li class='star' title='Excellent' data-value='4'>
                                    <i class='fa fa-star fa-fw'></i>
                                </li>
                                <li class='star' title='WOW!!!' data-value='5'>
                                    <i class='fa fa-star fa-fw'></i>
                                </li>
                            </ul>
                        </button>
                    </div>

                </td>
                </tr>
            </table>
            <p>
                <a href="#" data-role="button" data-inline="true" class="ys-button">Return</a>
                <a href="#" data-rel="back" id="share" data-role="button" data-inline="true"
                   class="ys-button">share</a>
            </p>
        </div>

    </div>

    <div data-role="popup" id="sucessfav" data-theme="a" class="ui-corner-all">
        <a href="#" data-rel="back"
           class="ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-right">X</a>
        <form>
            <div style="padding:10px 20px;">
                <h3 style="color: #2B9F3E; font-family:Poppins">Added to Favorite list</h3>
                <p>
                    <a href="#" data-role="button" data-inline="true" class="ys-button">Return</a>
                </p>
            </div>
        </form>
    </div>


    <div id="footer"></div>

</div>

<script>
    $(function () {
        $("#addcomment").click(function () {
            reset();
            $('#popupLogin1').popup('open');
        });
        $("#heart").click(function () {
            $('#sucessfav').popup('open');
        });
    });
</script>
<script>

    function increment() {
        document.getElementById('demoInput').stepUp();
    }

    function decrement() {
        document.getElementById('demoInput').stepDown();

    }
</script>

<script>
    // Get the modal
    var modal = document.getElementById("modal-comments");

    // Get the button that opens the modal
    var btn = document.getElementById("rate-comment");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks the button, open the modal

    let test = sessionStorage.getItem('comments');
    var array;

    $("#chat-box-items").empty();

    $("#chat-box-items").append('<div class="message-item">\n' +
        '                <table>\n' +
        '                    <tr>\n' +
        '                        <td>\n' +
        '                            <img src="image/Avater.png" class="message-item-pro-pic"/>\n' +
        '                        </td>\n' +
        '                        <td style="padding-left: 10px">\n' +
        '                            <div>\n' +
        '                                <b>niwarthana</b>\n' +
        '                                <br/>\n' + "Great Products." + '\n' +
        '                            <br/><img src="image/star/1.png" width="80">' +
        '                            </div>\n' +
        '                        </td>\n' +
        '                    </tr>\n' +
        '                </table>\n' +
        '            </div>'
    );

    if (test != null) {
        array = JSON.parse(test);
        $.each(array.commentList, function (key, value) {
            return $("#chat-box-items").append('<div class="message-item">\n' +
                '                <table>\n' +
                '                    <tr>\n' +
                '                        <td>\n' +
                '                            <img src="image/Avater.png" class="message-item-pro-pic"/>\n' +
                '                        </td>\n' +
                '                        <td style="padding-left: 10px">\n' +
                '                            <div>\n' +
                '                                <b>pavan</b>\n' +
                '                                <br/>\n' + value +
                '                            </div>\n' +
                '                        </td>\n' +
                '                    </tr>\n' +
                '                </table>\n' +
                '            </div>'
            );
        });
    }
    // When the user clicks on <span> (x), close the modal
    // span.onclick = function () {
    //     modal.style.display = "none";
    // };

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
</script>
<script>
    $(function () {

        $('#menu-messages').addClass('menu-selected');

        setTimeout(function () {
            $('#menu-messages').addClass('menu-selected');
        }, 1000);

        $('#home').click(function () {
            window.location.href = '/';
        });

        $('#share').click(function (evt) {
            var message = $('#inputmsg').val();
            var ratingValue = sessionStorage.getItem('rating');

            let commentsTest = sessionStorage.getItem('comments');

            if (commentsTest != null) {

                var array = JSON.parse(commentsTest);

                array.commentList.push(message);

                let storeObj = JSON.stringify(array);

                sessionStorage.setItem('comments', storeObj);

                let comments = sessionStorage.getItem('comments');

            } else {
                var messageList = {
                    commentList: []
                };

                messageList.commentList.push(message);

                let storeObj = JSON.stringify(messageList);

                sessionStorage.setItem('comments', storeObj);

                let comments = sessionStorage.getItem('comments');

            }

            if (message.length > 0) {

                $('#chat-box-items').append('<div class="message-item">\n' +
                    '                <table>\n' +
                    '                    <tr>\n' +
                    '                        <td>\n' +
                    '                            <img src="image/Avater.png" class="message-item-pro-pic"/>\n' +
                    '                        </td>\n' +
                    '                        <td style="padding-left: 10px">\n' +
                    '                            <div>\n' +
                    '                                <b>pavan</b>\n' +
                    '                                <br/>\n' + message + ' ' +
                    '                            <br/><img src="image/star/' + ratingValue + '.png" width="80">' +
                    '                            </div>\n' +
                    '                        </td>\n' +
                    '                    </tr>\n' +
                    '                </table>\n' +
                    '            </div>');

                $('#inputmsg').val('');
            } else {
                $("#popupBasic").popup("open", {x: evt.pageX, y: evt.pageY});
            }
        });

        $('#stars li').on('mouseover', function () {
            var onStar = parseInt($(this).data('value'), 10); // The star currently mouse on

            // Now highlight all the stars that's not after the current hovered star
            $(this).parent().children('li.star').each(function (e) {
                if (e < onStar) {
                    $(this).addClass('hover');
                } else {
                    $(this).removeClass('hover');
                }
            });

        }).on('mouseout', function () {
            $(this).parent().children('li.star').each(function (e) {
                $(this).removeClass('hover');
            });
        });


        /* 2. Action to perform on click */
        $('#stars li').on('click', function (evt) {
            var onStar = parseInt($(this).data('value'), 10); // The star currently selected
            var stars = $(this).parent().children('li.star');

            for (i = 0; i < stars.length; i++) {
                $(stars[i]).removeClass('selected');
            }

            for (i = 0; i < onStar; i++) {
                $(stars[i]).addClass('selected');
            }

            // JUST RESPONSE (Not needed)
            var ratingValue = parseInt($('#stars li.selected').last().data('value'), 10);
            sessionStorage.setItem('rating', ratingValue);
        });
    });
</script>
<script>
    reset();

    function reset() {

        $('.rate-one').on('click', function () {
            $('.rate-one').toggleClass("rate-active-one");
        });
        $('.rate-two').on('click', function () {
            $('.rate-one').not(this).removeClass("rate-active-one");
            $('.rate-one').toggleClass("rate-active-one");
            $('.rate-two').toggleClass("rate-active-two");
        });
        $('.rate-three').on('click', function () {
            $('.rate-one').not(this).removeClass("rate-active-one");
            $('.rate-two').not(this).removeClass("rate-active-two");
            $('.rate-one').toggleClass("rate-active-one");
            $('.rate-two').toggleClass("rate-active-two");
            $('.rate-three').toggleClass("rate-active-three");
        });
        $('.rate-four').on('click', function () {
            $('.rate-one').not(this).removeClass("rate-active-one");
            $('.rate-two').not(this).removeClass("rate-active-two");
            $('.rate-three').not(this).removeClass("rate-active-three");
            $('.rate-one').toggleClass("rate-active-one");
            $('.rate-two').toggleClass("rate-active-two");
            $('.rate-three').toggleClass("rate-active-three");
            $('.rate-four').toggleClass("rate-active-four");
        });
        $('.rate-five').on('click', function () {
            $('.rate-one').not(this).removeClass("rate-active-one");
            $('.rate-two').not(this).removeClass("rate-active-two");
            $('.rate-three').not(this).removeClass("rate-active-three");
            $('.rate-four').not(this).removeClass("rate-active-four");
            $('.rate-one').toggleClass("rate-active-one");
            $('.rate-two').toggleClass("rate-active-two");
            $('.rate-three').toggleClass("rate-active-three");
            $('.rate-four').toggleClass("rate-active-four");
            $('.rate-five').toggleClass("rate-active-five");
        });
    }

</script>


<script>
    $(function () {
        $('#header').load('header.html');
        $('#footer').load('footer.html');
    });
</script>

</body>

</html>
